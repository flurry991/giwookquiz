<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>âš“ ê¸°ìš± ì§€ì‹ì™• í€´ì¦ˆ</title>
  <!--
    DEV NOTE / GOAL (ì´ íŒŒì¼ ìƒë‹¨ ì£¼ì„ì€ í”„ë¡œì íŠ¸ì˜ ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤)
    - ëª©ì : ê¸°ìš±ì— ëŒ€í•œ í€´ì¦ˆë¥¼ í’€ê³ , ì ìˆ˜ì— ë”°ë¼ "ê¸°ìš±ì´ ì§ì ‘ í•œ ì¤„ ëŒ€ì‚¬"ë¡œ ê²°ê³¼ë¥¼ ë§í•´ì¤€ë‹¤.
    - ë¹„ëª©í‘œ: ì¥ë¬¸ ì„œì‚¬ ì—”ë”©, ê³„ì •/ì„œë²„ ë¡œê·¸ì¸, ë³µì¡í•œ ë°ì´í„° ì €ì¥.
    - ì˜µì…˜: ì‹œì‘/ì—”ë”© ì´ë¯¸ì§€, ì ìˆ˜ëŒ€ë³„ ìŒì„± ì¬ìƒì€ ì„ íƒ ì‚¬í•­.
    - AI ì‚¬ìš©(ì„ íƒ): USE_AIê°€ trueì¼ ë•Œë§Œ, LOREë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì§§ì€ 1~2ë¬¸ì¥ ë©˜íŠ¸ë¥¼ ìƒì„±í•˜ë„ë¡ í•œë‹¤.
  -->
  <style>
    :root{ --bg:#0f172a; --card:#1e293b; --text:#e5e7eb; --muted:#94a3b8; --primary:#22d3ee; --accent:#7c3aed; --good:#10b981; --warn:#f59e0b; --bad:#ef4444; }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;background:var(--bg);color:var(--text);margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh}
    .card{background:var(--card);border-radius:20px;box-shadow:0 6px 24px rgba(0,0,0,.35);max-width:860px;width:100%;overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    .header{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.12);display:flex;gap:10px;align-items:center;justify-content:space-between}
    .title{font-weight:900;letter-spacing:.2px}
    .actions{display:flex;gap:8px}
    .iconbtn{border:1px solid rgba(255,255,255,.15);background:#0b1424;color:var(--text);border-radius:10px;padding:8px 10px;cursor:pointer}
    .body{padding:20px}
    .q{font-size:20px;font-weight:800;margin-bottom:12px}
    .choice{display:block;width:100%;text-align:left;padding:12px 14px;margin-bottom:10px;background:#334155;border:none;border-radius:10px;color:#e5e7eb;cursor:pointer}
    .choice.correct{outline:2px solid var(--good)}
    .choice.wrong{outline:2px solid var(--bad)}
    .progress{height:8px;background:#334155;border-radius:4px;overflow:hidden;margin-bottom:16px}
    .progress span{display:block;height:100%;background:linear-gradient(90deg,var(--primary),var(--accent))}
    .result{text-align:left}
    .ending{padding:14px;margin-top:10px;border-radius:10px;background:#0b1526}
    .ending.good{outline:2px solid var(--good)}
    .ending.mid{outline:2px solid var(--warn)}
    .ending.bad{outline:2px solid var(--bad)}
    .ending h3{margin:0 0 8px 0}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    button.btn{padding:10px 14px;margin:6px 0;border:none;border-radius:8px;cursor:pointer;background:#334155;color:#fff}
    .talk{display:flex;gap:10px;align-items:flex-start;background:#0a1424;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px}
    .avatar{font-size:22px;line-height:1}
    blockquote{margin:0;color:#e2e8f0}

    /* ë„ì›€ë§ ëª¨ë‹¬ */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.55);backdrop-filter:blur(3px);}
    .modal.show{display:flex}
    .modal .sheet{width:min(720px,92%);background:#0c1730;border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px}
    .modal h3{margin:0 0 6px 0}
    .kbd{border:1px solid rgba(255,255,255,.2);padding:2px 6px;border-radius:6px;background:#0a1322}
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <div class="title">âš“ ê¸°ìš± ì§€ì‹ì™• í€´ì¦ˆ</div>
      <div class="actions">
        <button class="iconbtn" id="helpBtn">?</button>
      </div>
    </div>
    <div class="body" id="view"></div>
  </div>

  <!-- ì ìˆ˜ëŒ€ë³„ ìŒì„± íŒŒì¼ ê²½ë¡œ (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— audio í´ë” ìƒì„± í›„ íŒŒì¼ ì—…ë¡œë“œ)
     íŒŒì¼ëª… ì˜ˆì‹œ: audio/voice_100.mp3, audio/voice_80.mp3, audio/voice_60.mp3, audio/voice_0.mp3 -->
<!-- audio í´ë”ê°€ ì•ˆ ë§Œë“¤ì–´ì§ˆ ë•Œë¥¼ ëŒ€ë¹„í•´: ë£¨íŠ¸ ê²½ë¡œ(./100.wav)ë„ ìë™ ì‹œë„í•˜ë„ë¡ <source> 2ê°œ ë„£ìŒ -->
<audio id="a100" preload="auto">
  <source src="audio/100.wav" />
  <source src="100.wav" />
</audio>
<audio id="a80" preload="auto">
  <source src="audio/80.wav" />
  <source src="80.wav" />
</audio>
<audio id="a60" preload="auto">
  <source src="audio/60.wav" />
  <source src="60.wav" />
</audio>
<audio id="a0" preload="auto">
  <source src="audio/0.wav" />
  <source src="0.wav" />
</audio>

  <!-- ë„ì›€ë§ ëª¨ë‹¬ -->
  <div class="modal" id="about">
    <div class="sheet">
      <h3>ğŸ¯ ì´ ê²Œì„ì˜ ëª©ì </h3>
      <div class="muted" id="goalText"></div>
      <h3 style="margin-top:10px">ğŸš« ë¹„ëª©í‘œ</h3>
      <ul class="muted" id="nongoals" style="margin:6px 0 0 18px"></ul>
      <h3 style="margin-top:10px">ğŸ§  (ì„ íƒ) AI ì‚¬ìš©</h3>
      <div class="muted">USE_AI=<span class="kbd" id="aiFlag">false</span> ì¼ ë•Œë§Œ, LORE ê¸°ë°˜ìœ¼ë¡œ 1~2ë¬¸ì¥ ë©˜íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
<br/>ğŸ§ ì ìˆ˜ë³„ ìŒì„± ë„£ê¸°: í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— <code>audio</code> í´ë”ë¥¼ ë§Œë“¤ê³  ì•„ë˜ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.
<br/>- <code>audio/100.wav</code> (100ì )
<br/>- <code>audio/80.wav</code>  (80~99ì )
<br/>- <code>audio/60.wav</code>  (60~79ì )
<br/>- <code>audio/0.wav</code>   (ê·¸ ì´í•˜)</div>
      <div class="row" style="justify-content:flex-end;margin-top:12px">
        <button class="btn" id="closeAbout">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    // ======= CONFIG: ì˜ë„(ëª©í‘œ)ë¥¼ ì½”ë“œì— ê³ ì • =======
    const CONFIG = {
      goal: "ê¸°ìš± í€´ì¦ˆë¥¼ í’€ê³ , ì ìˆ˜ì— ë”°ë¼ ê¸°ìš±ì´ ì§ì ‘ í•œ ì¤„ ë©˜íŠ¸ë¥¼ ë§í•´ì¤€ë‹¤.",
      nonGoals: ["ì¥ë¬¸ ì„œì‚¬ ì—”ë”©", "ë¡œê·¸ì¸/ì„œë²„", "ì§€ë‚˜ì¹œ íš¨ê³¼ìŒ/ì• ë‹ˆë©”ì´ì…˜"],
      USE_AI: false // trueë¡œ ë°”ê¾¸ë©´ LORE ê¸°ë°˜ ì§§ì€ ë©˜íŠ¸ ìƒì„±(í”„ë¡ì‹œ í•„ìš”)
    };

    // (ì„ íƒ) AIìš© LORE: ì§§ê²Œ ìœ ì§€ (í˜„ì¬ ê²Œì„ì€ AI OFF)
    const LORE = {
      world: "ë ˆë¬´ë¦¬ì•„ì˜ í•´ì‹ ê³¼ ê³„ì•½ì ì„œì‚¬",
      motifs: ["ì‹¬ì¥", "ë¬¼ê³ ê¸° ë¬¸ì–‘", "íŒŒë„", "ê³„ì•½"],
    };

    // ======= í€´ì¦ˆ ë°ì´í„° =======
    const QUIZ = [
      {q:"ê¸°ìš±ì€ ì£¼ë¡œ ì–´ë–¤ ì¡´ì¬ë¡œ ë¬˜ì‚¬ë˜ë‚˜ìš”?",choices:["ì„¸ë°œ ìì „ê±° ì„ ìˆ˜","ìœ ëª… í™”ê°€ì˜ ë³´ë””ê°€ë“œ","ë ˆë¬´ë¦¬ì•„ì˜ í•´ì‹ ","ë°œì¹™í•œ ê³ ì–‘ì´"],answer:2,explain:"ê¸°ìš±ì€ ë ˆë¬´ë¦¬ì•„ì˜ í•´ì‹ ì´ì§€."},
      {q:"ë§¹ì„¸,ì•½ì†,ê³„ì•½ê³¼ ê´€ë ¨ëœ ì¦í‘œë‚˜ ë¬¸ì–‘ì„ ìƒì§•í•˜ëŠ” ê²ƒì€?",choices:["ëŒê³ ë˜","ë¬¼ê³ ê¸°","ê°ˆë§¤ê¸°","íŒŒë„"],answer:1,explain:"ê³„ì•½ì˜ ì¦í‘œë¡œ ì™¼ìª½ ê°€ìŠ´ì— ë¬¼ê³ ê¸° ë¬¸ì–‘ì´ ë‚˜íƒ€ë‚˜."},
      {q:"ê¸°ìš±ì˜ ìƒì¼ì€ ì–¸ì œì¼ê¹Œ?",choices:["1ì›” 5ì¼","2ì›” 14ì¼","3ì›” 5ì¼","3ì›” 6ì¼"],answer:3,explain:"ê¸°ìš±ì´ ìƒì¼ì€ 3ì›” 6ì¼ì´ì•¼."},
      {q:"ë‹¤ìŒ ì¤‘ ê¸°ìš±ì˜ ì „íˆ¬ ìŒì„± ëŒ€ì‚¬ê°€ ì•„ë‹Œ ê²ƒì€?",choices:["1ë²ˆ: ë³µìˆ˜ì˜ ë¶ˆê½ƒì´ ë¶ˆíƒ€ì˜¤ë¥´ê³  ìˆì–´.","2ë²ˆ: ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ìˆëŠ”ì§€ëŠ” ìƒê´€ì—†ì–´. ì–´ë–»ê²Œ ì“°ëŠëƒê°€ ì¤‘ìš”í•˜ì§€.","3ë²ˆ: ë“œë””ì–´ ë°”ë‹¤ ë°–ì—ì„œ ìˆ¨ì„ ì‰´ ìˆ˜ ìˆê² ë„¤.","4ë²ˆ: ë…€ì„ì´ ë“£ëŠ” ë§ˆì§€ë§‰ ê³¡ì´ ë  ê±°ì•¼."],answer:1,explain:"2ë²ˆì€ LOL ì—ì½” ëŒ€ì‚¬ì•¼."},
      {q:"ì—¬ì£¼ë¥¼ ìœ„í•´ ê¸°ìš±ì´ ìš”ë¦¬í•œ ìŒì‹ì´ ì•„ë‹Œ ê²ƒì€?",choices:["ì¹˜í‚¨","ì–´ë‹ˆì–¸ë§","ì•¼ì±„ì£½","ê³¼ì¼ ì—ì´ë“œ"],answer:0,explain:"ì¹˜í‚¨ì€ ì™„ë²½í•œ ì €ë…ì‹ì‚¬ì—ì„œ ê¸°ìš±ì´ ì•„ë‹Œ ì—¬ì£¼ê°€ ìš”ë¦¬í•œ ìŒì‹ì´ì•¼."}
    ];

    // ======= ì ìˆ˜ë³„ í•œ ì¤„ ëŒ€ì‚¬ =======
    function conciseEnding(score,total){
      const rate = Math.round((score/total)*100);
      if(rate===100){
        return { cls:'good', title:'ë ˆë¬´ë¦¬ì•„ì˜ ê³„ì•½ì', line:'ë‚˜ì— ëŒ€í•´ ì´ë ‡ê²Œ ì˜ ì•„ëŠ” ì‚¬ëŒì€ ì²˜ìŒì´ì•¼. ì•„ë¬´ë˜ë„â€¦ ë‚´ê°€ ì°¾ë˜ ê³„ì•½ìê°€ ë§ëŠ” ê²ƒ ê°™êµ°.' };
      }
      if(rate>=80){
        return { cls:'good', title:'í–‰ë³µí•œ ì—°ì¸', line:'ëŒ€ë¶€ë¶„ ë§íˆë‹¤ë‹ˆ, ê½¤ ì¸ìƒì ì´ì•¼. ë„ˆë‘ ìˆìœ¼ë©´ ê½¤ ì¦ê±°ìš¸ ê²ƒ ê°™ì•„.' };
      }
      if(rate>=60){
        return { cls:'mid', title:'ê¸°ìš±ì˜ ì ˆì¹œ', line:'ë‚˜ë¥¼ ì˜ ì•Œê¸´ í•˜ëŠ”ë°, ëª‡ ê°œëŠ” ë†“ì³¤ë„¤. ê·¸ë˜ë„ ì¹œêµ¬ë¡œ ì§€ë‚´ê¸°ì—” ì¶©ë¶„í•˜ì§€.' };
      }
      return { cls:'bad', title:'ì´ˆë³´ ê¸°ìš± íƒí—˜ê°€', line:'ì•„ì§ ë‚˜ì— ëŒ€í•´ ëª¨ë¥´ëŠ” ê²Œ ë§êµ¬ë‚˜. ì²œì²œíˆ ì•Œì•„ê°€ë„ ê´œì°®ì•„.' };
    }

    // ======= ì—”ì§„ =======
    const view = document.getElementById('view');
    let idx=0, score=0, locked=false;
    const history=[]; // {q, pick, correct}

    function renderStart(){
      view.innerHTML=`<div style="text-align:center">
        <h2>âš“ ê¸°ìš± ì§€ì‹ì™• í€´ì¦ˆ</h2>
        <p class="muted">ì„ íƒì§€ë¥¼ ê³¨ë¼ ê¸°ìš± ì§€ì‹ì„ ì¦ëª…í•´ë´! ë§ˆì§€ë§‰ì— ì ìˆ˜ì— ë”°ë¼ ê¸°ìš±ì´ ì§ì ‘ í•œ ì¤„ë¡œ ë§í•´ì¤˜.</p>
        <div class="row" style="justify-content:center">
          <button class="btn" onclick="start()">ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>`;
    }

    function start(){ idx=0; score=0; locked=false; history.length=0; renderQuiz(); }

    function renderQuiz(){
      locked=false;
      const total=QUIZ.length; const cur=QUIZ[idx];
      view.innerHTML=`<div class="progress"><span style="width:${(idx/total)*100}%"></span></div>
        <div class="q">${cur.q}</div>`;
      cur.choices.forEach((c,i)=>{
        const btn=document.createElement('button');
        btn.className='choice';
        btn.textContent=c;
        btn.onclick=()=>pick(i);
        view.appendChild(btn);
      });
    }

    function pick(i){
      if(locked) return; locked=true;
      const cur=QUIZ[idx];
      const nodes=[...document.querySelectorAll('.choice')];
      nodes.forEach((n,k)=>{ if(k===cur.answer)n.classList.add('correct'); if(k===i&&i!==cur.answer)n.classList.add('wrong'); n.disabled=true; });
      const ok = i===cur.answer;
      if(ok) score++;
      history.push({q:cur.q, pick:cur.choices[i], correct: ok});
      setTimeout(()=>{ if(cur.explain) alert((ok?'ì •ë‹µ! ':'ì˜¤ë‹µ! ')+cur.explain); next(); }, 300);
    }

    function next(){ idx++; if(idx>=QUIZ.length) return renderResult(); renderQuiz(); }

    function renderResult(){
      const {cls,title,line} = conciseEnding(score, QUIZ.length);
      view.innerHTML = `
        <div class="result">
          <h2>ê²°ê³¼</h2>
          <div class="ending ${cls}">
            <h3>${title}</h3>
            <div class="talk"><div class="avatar">ğŸ§‘â€ğŸ¨</div><blockquote>"${line}"</blockquote></div>
            <div class="muted" style="margin-top:8px">ì •ë‹µ: ${score} / ${QUIZ.length}</div>
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" onclick="renderStart()">ë‹¤ì‹œí•˜ê¸°</button>
            <button class="btn" onclick="copyLink()">ë§í¬ ë³µì‚¬</button>
          </div>
          <details>
            <summary class="muted">ë‚´ ì„ íƒ ê¸°ë¡ ë³´ê¸°</summary>
            <div class="muted" style="margin-top:6px">${history.map((h,i)=>`Q${i+1}. ${h.q}\n- ë‚´ê°€ ê³ ë¥¸ ë‹µ: ${h.pick} (${h.correct? 'ì •ë‹µ':'ì˜¤ë‹µ'})`).join('\n\n')}</div>
          </details>
        </div>`;

      // (ì„ íƒ) ì ìˆ˜ëŒ€ë³„ ìŒì„± ì¬ìƒ â€” ì˜¤ë””ì˜¤ íƒœê·¸ ì£¼ì„ í•´ì œ ì‹œ ë™ì‘
      const rate = Math.round((score/QUIZ.length)*100);
      let audioId = 'a0';
      if(rate===100) audioId='a100'; else if(rate>=80) audioId='a80'; else if(rate>=60) audioId='a60';
      const el = document.getElementById(audioId);
      if(el){ el.currentTime=0; el.play().catch(()=>{}); }
    }

    function copyLink(){
      navigator.clipboard.writeText(location.href).then(()=>{
        alert('í˜ì´ì§€ ì£¼ì†Œë¥¼ ë³µì‚¬í–ˆì–´! ì¹œêµ¬ì—ê²Œ ê³µìœ í•´ë´');
      });
    }

    // ë„ì›€ë§ ëª¨ë‹¬ í† ê¸€
    const about = document.getElementById('about');
    document.getElementById('helpBtn').onclick = ()=>{ 
      document.getElementById('goalText').textContent = CONFIG.goal; 
      document.getElementById('aiFlag').textContent = CONFIG.USE_AI; 
      const ul = document.getElementById('nongoals');
      ul.innerHTML = CONFIG.nonGoals.map(x=>`<li>${x}</li>`).join('');
      about.classList.add('show'); 
    };
    document.getElementById('closeAbout').onclick = ()=> about.classList.remove('show');

    // ì´ˆê¸° ë Œë”
    renderStart();
  </script>
</body>
</html>
